<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>var let const</title>
</head>
<body>
  <script>
    /*
    默认使用const
    当变量需要更新时使用let
    尽量不使用var
    */

    // 声明变量
    var id = 1  // 作用域是 function scope（函数作用域）。
    var id = 2 // var声明一个名字相同变量，编译器不会报错。
    let age = '24';  // 作用域是 block scope（块级作用域），let创建会被提升，但不会初始化（暂时性死区）。

    // 立即函数有独立的作用域，可以让变量私有化，但操作比较繁琐。
    (function () {
      var name = 'Jay'
      console.log(`this is my name: ${name}, this is window.name: ${window.name}`)
    })()

    // 使用let 或 const 实现变量私有化更简便
    {
      let name = 'Jay'
      console.log(`this is my name: ${name}, this is window.name:  ${window.name}`)
    }

    // 声明常量(block scope)
    const person = {
      name: 'Jay',
      sex: 'male'
    }

    const jay = Object.freeze(person) // 通过Object.freeze()可以冻结对象的属性值（但如果这个对象的属性值，指向另一个对象时，这个被指向的对象的值是可以改变的）。
    jay.name = 'Junhong'

    console.log(id, age, person, Jay)


    /*
    Example：经典的面试题
    setTimeout是异步任务，会在for执行完后执行，并且 i 是函数作用域，在这里属于全局变量，所以当延时函数执行时，i 已经为10
    可以使用let声明，使 i 变为块级作用域（for里），就可以正常输出 0 - 9
    */
    for(var i = 0; i < 10; i++) {
      setTimeout(() => {
        console.log(i)
      }, 0)
    }
  </script>
</body>
</html>